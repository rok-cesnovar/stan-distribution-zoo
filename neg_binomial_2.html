<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://d3js.org/d3.v6.js"></script>
  <script src="math-js-wasm/neg_binomial_2.js"></script>
  <script src="stan-distribution-zoo.js"></script>
  <script>
    var x;
    var y;
    var svg;
    var xAxis;
    var yAxis;
    var data = [];
    var params = {
      y_range: 40,
      mu: 10,
      phi: 3,
    };
    var continous = false;
    function update_data() {
      data = []
      for (let y = 0; y < params.y_range; y = y + 1) {
        let res = Module.neg_binomial_2_lpmf(y, params.mu, params.phi)
        if ($("#exp-check")[0].checked) {
          res = Math.exp(res) 
        }
        data.push({ ser1: y, ser2:  res})
      }
    }
      var Module = {
        onRuntimeInitialized: function() {
          $(document).ready(function(){
            setup_page(
              {
                function_name: "neg_binomial_2_lpmf (y | mu, sigma)",
                sliders: [
                  {
                    name: "y_range", text: "Range of y",
                    value: 40, min: 1, max: 100, step: 1
                  },
                  {
                    name: "mu", text: "mu",
                    value: 10, min: 0, max: 50, step: 0.2
                  },
                  {
                    name: "phi", text: "phi",
                    value: 3, min: 0, max: 100, step: 0.2
                  }
                ],
                exponentiate: true, 
                x_axis_text: "y"
              }
            )
          })
        }
      }
      </script>

    </head>

    <body>
      <div id="figure"></div>
    </body>
    
    </html>
